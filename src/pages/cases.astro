---
import MainLayout from "../layouts/MainLayout.astro";
import Hero from "../components/organisms/Hero.astro";
import CardCases from "../components/molecules/CardCases.astro";

import cases from "../data/cases.json";
import AboutGallery from "../components/organisms/AboutGallery.astro";
import Filter from "../components/atoms/Filter.astro";
---

<MainLayout title="Cases | Twentyfour">
  <Hero variant="default" title="Cases" text="I mere end 10 år har vi hjulpet virksomheder med at løse digitale udfordringer – store som små. Vi elsker at finde løsninger, der faktisk virker – også når tingene bliver komplekse. " />
  <section class="py-32 grid gap-10">
    <header class="flex justify-between">
      <div id="filters" class="flex gap-4 py-2 px-8 bg-background-glass rounded-full border-2 border-border-primary">
        <Filter filter="alle" />
        <Filter filter="design" />
        <Filter filter="webudvikling" />
        <Filter filter="integration" />
        <Filter filter="vedligeholdelse" />
      </div>
      <p>Søgefunktion</p>
    </header>
    <ul class="grid grid-cols-3 gap-x-5 gap-y-11 items-start">
      {cases.map((oneCase) => <CardCases filters={oneCase.services.join(",")} data={oneCase} variant={oneCase.thumbnail} />)}
      <!-- {cases.map((oneCase) => <CardCases filters={oneCase.services.join(",")} data={oneCase} variant={oneCase.thumbnail} />)} -->
    </ul>
    <footer class="grid place-content-center">
      <p>Pagination</p>
    </footer>
  </section>
</MainLayout>

<script>
  const buttons = document.querySelectorAll("#filters button");
  const cards = document.querySelectorAll(".case-card");

  buttons.forEach((button) => {
    button.addEventListener("click", () => {
      const filter = button.getAttribute("data-filter");

      // --- Fjern "active" fra alle knapper
      buttons.forEach((btn) => btn.classList.remove("border-b-2"));

      // --- Tilføj "active" til den klik-kede knap
      button.classList.add("border-b-2");

      cards.forEach((card) => {
        const services = card.getAttribute("data-services").split(",");
        if (filter === "alle" || services.includes(filter)) {
          card.classList.remove("hidden");
        } else {
          card.classList.add("hidden");
        }
      });
    });
  });
</script>
